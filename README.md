# Geo Atlas

<video src="./docs/video/geo-atlas-preview.mp4" controls="controls" width="100%" height=""></video>

## ä»‹ç»

[Geo Atlas](https://github.com/geoatlas-cloud/geo-atlas)ï¼Œè¯‘ä¸ºåœ°ç†åœ°å›¾å†Œ(åœ°ç†åœ°å›¾é›†)ï¼Œå°±åƒå°æ—¶å€™ä¹°åˆ°çš„çº¸è´¨çš„åœ°ç†åœ°å›¾å†Œä¹¦æœ¬ï¼Œé‡Œé¢å¡«å……ç€å„å¼å„æ ·çš„åœ°å›¾ã€‚æ‰€ä»¥, æˆ‘ä¹Ÿå¸Œæœ›æœ‰é‚£ä¹ˆä¸€ä¸ªä¸œè¥¿ï¼ŒåŒæ ·å¯ä»¥å¯¹å¤–æä¾›å„ç§å„æ ·çš„åœ°å›¾ä»¥ä¾›ä½¿ç”¨ã€‚

ç›®å‰æ¥è¯´ï¼Œä»–è¿˜åªæ˜¯ä¸€ä¸ªåŸºäºJavaçš„å¼€å‘çš„ï¼Œå¯ç”¨äºå¿«é€Ÿæ„å»ºçŸ¢é‡åˆ‡ç‰‡æœåŠ¡çš„åŸºç¡€åº“ã€‚

> æœ¬ä¾‹ä¸­åŸºäºGeo Atlaså®ç°äº†ä¸€ä¸ªç²¾ç®€ç‰ˆæœ¬çš„çŸ¢é‡åˆ‡ç‰‡æœåŠ¡ï¼Œä»ç»“æœæ¥çœ‹ï¼Œå¯ä»¥å°†å…¶çœ‹ä½œä¸ºä»…å®ç°äº†çŸ¢é‡åˆ‡ç‰‡åŠŸèƒ½çš„GeoServerçš„ç²¾ç®€æå‡ç‰ˆæœ¬ã€‚

## èƒŒæ™¯å’ŒåŠ¨æœº

é¦–å…ˆï¼Œæˆ‘æ˜¯ä¸€ä¸ªä¸»åšæœåŠ¡ç«¯å¼€å‘çš„GISå¼€å‘å·¥ç¨‹å¸ˆï¼Œå¹³æ—¶æ¥è§¦æœ€å¤šçš„å°±æ˜¯ç®¡ç½‘åœ°å›¾æœåŠ¡å‘å¸ƒã€‚æ­¤å‰çš„å·¥ä½œä¸­æ²¡æœ‰ä½¿ç”¨ä»»ä½•å¹³å°æŠ€æœ¯ï¼Œæ¯”å¦‚ï¼šArcGISã€è¶…å›¾ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å¼€æºæŠ€æœ¯ã€‚æŠ€æœ¯æ ˆå¤§ä½“å¯ä»¥æ€»ç»“ä¸ºï¼šSpringBoot + GeoServer + Mapbox + ç©ºé—´æ•°æ®åº“ã€‚

å…¶æ¬¡ï¼Œç›®å‰åœ¨ä¸šåŠ¡åº”ç”¨ä¸Šï¼ŒäºŒç»´åœ°å›¾è¿˜æ˜¯ä¸»æµã€‚è€ŒäºŒç»´åœ°å›¾æŠ€æœ¯é‡Œé¢ï¼Œå±Mapbox Vector Tileçš„ä½“éªŒæœ€å¥½ã€‚æ‰€ä»¥ï¼Œç›®å‰çš„æŠ€æœ¯è·¯çº¿æ˜¯é€šè¿‡ GeoServer æ¥å‘å¸ƒVector Tileã€‚

ç„¶åï¼Œåœ¨ GeoServer ä½¿ç”¨ä¸­ï¼Œæˆ‘å‘ç°äº†è¿™ä¸ªå‡ ä¸ªé—®é¢˜ï¼š

- å—é™äºå…¶å¼€æºåè®®ï¼ˆGPL 2.0ï¼‰çš„çº¦æŸï¼Œä½ æ— æ³•é€šè¿‡ä¿®æ”¹éƒ¨åˆ†æºä»£ç çš„æ–¹å¼ï¼Œå°†å…¶ç›´æ¥é›†æˆåˆ°ç³»ç»Ÿå†…éƒ¨ã€‚åªèƒ½æ˜¯å•ç‹¬éƒ¨ç½²ï¼Œé€šè¿‡å…¶æä¾›çš„RESTæ¥å£è¿›è¡Œäº¤äº’ã€‚åŸºäºæ­¤ï¼Œéƒ¨ç½²æ–¹å¼åŒæ ·å—é™ã€‚
- GeoServer æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„ä¸œè¥¿ï¼ŒåŒæ—¶ä»–æ˜¯ä¸€ä¸ªå•ä½“é¡¹ç›®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå“ªæ€•æˆ‘åªéœ€è¦æä¾›MWTS+MVTæœåŠ¡ï¼Œæˆ‘ä¹Ÿéœ€è¦éƒ¨ç½²ä¸€ä¸ªå…¨åŠŸèƒ½çš„èŠ‚ç‚¹ï¼Œæ— æ³•æŒ‰éœ€ä½¿ç”¨ï¼ˆè¿™é‡Œä¸å¾—ä¸æä¸€ä¸‹GeoServer Cloudé¡¹ç›®ï¼Œä½†æ˜¯å®ƒæå‡ºå¾—è¦æ±‚æ›´å¤šäº†ï¼Œéœ€è¦ä¸€å¥—å¾®æœåŠ¡çš„ç¯å¢ƒï¼‰
- ä»å…¬è°¨[ã€ŠWebGISæ•°æ®ä¸åˆ‡ç‰‡æˆ–æ˜¯æ—¶ä»£å¿…ç„¶ã€‹](https://zhuanlan.zhihu.com/p/512298212)ä¸€æ–‡æ¨è®ºï¼ŒGeoServerä¸­æä¾›çš„MVTæŠ€æœ¯ï¼ˆæŒ‡æ•°æ®åˆ‡ç‰‡è¿‡ç¨‹ï¼‰å·²ç»ç®—æ˜¯åˆ‡ç‰‡èµ·æºæ—¶ä»£çš„äº§ç‰©äº†ï¼Œè€Œä»Šå·²ç»è·¨è¿‡äº†çŸ¢é‡åˆ‡ç‰‡æ—¶ä»£ï¼ˆæ•°æ®è¿˜æ˜¯é¢„åˆ‡ï¼‰ï¼Œè¿›å…¥äº†åŠ¨æ€çŸ¢é‡åˆ‡ç‰‡æ—¶ä»£äº†
- GeoServerä¸­Vector Tileä¸GeoWebcacheä¸­çš„Tile MetaæŠ€æœ¯æœ‰å†²çªï¼Œç“¦ç‰‡æ¸…ç†å­˜åœ¨BUGã€‚å¯ä»¥ç†è§£ä¸ºï¼ŒGeoServerå¯¹äºçŸ¢é‡ç“¦ç‰‡çš„æ”¯æŒå¹¶ä¸æ˜¯å¾ˆå¥½ã€‚
- ä¸èƒ½å¾ˆå¥½çš„å¤„ç†ç“¦ç‰‡ç¼“å­˜ä¸åŠ¨æ€ä¸šåŠ¡æ•°æ®çš„çŸ›ç›¾ï¼Œå³ä½¿GeoWebcacheæä¾›ç¼“å­˜æ¸…ç†çš„ç­–ç•¥ã€‚ï¼ˆLayerä¸­BoundingboxèŒƒå›´é—®é¢˜ï¼‰

> GeoServerå®Œå…¨æ˜¯æ …æ ¼é‡‘å­—å¡”æŠ€æœ¯çš„å®ç°ï¼Œä¸è¿‡æ˜¯å°†æ …æ ¼é‡‘å­—å¡”æŠ€æœ¯åŒæ—¶åº”ç”¨åœ¨æ …æ ¼æ•°æ®å’ŒçŸ¢é‡æ•°æ®ä¸Šï¼ŒåŒæ—¶ä»–å¹¶æ²¡æœ‰å¾ˆå¥½çš„é’ˆå¯¹ä¸åŒå±‚çº§å¯¹æ•°æ®è¿›è¡ŒæŠ½ç¨€ç®€åŒ–ï¼ˆå…¶å°è¯•ä»æœåŠ¡ç«¯é…å›¾SLDä¸­è·å–æ•°æ®åˆ†çº§è§„åˆ™ï¼Œæˆ‘æ²¡æœ‰æµ‹è¯•è¿‡ï¼Œä½†åå¯¹ï¼Œç†ç”±å‚è§: [å…³äºçŸ¢é‡ç“¦ç‰‡æŠ€æœ¯æ”¯æŒå‰ç«¯æ¸²æŸ“å¸¦æ¥çš„æ€è€ƒ](https://fuyi-atlas.github.io/posts/gis/thoughts-on-mvt-front-end-rendering/)ï¼‰ï¼Œé‚£ä¹ˆå°±å‡ºç°äº†ä¸€ä¸ªpbfæœ‰è¿‘20Mçš„æƒ…å†µã€‚åŒæ—¶ä¹Ÿå›ç­”äº†ä¸ºä»€ä¹ˆç°åœ¨å¤§å®¶éƒ½ç›´æ¥åœ¨æ•°æ®åº“å±‚é¢å®ç°çŸ¢é‡ç“¦ç‰‡ï¼ˆæˆ–è€…è¯´æ˜¯åœ¨æ•°æ®æºä¸­ï¼‰ï¼Œä¸€æ˜¯å¯ä»¥æ— è§†æ•°æ®ä¼ é€’çš„æ—¶é—´æŸè€—ï¼›äºŒæ˜¯å¯ä»¥ç›´æ¥åšæŠ½ç¨€ç®€åŒ–ï¼Œè¿™æ ·å‡ºå»çš„æ•°æ®å°‘äº†ï¼Œä¼ è¾“é€Ÿåº¦è‡ªç„¶ä¹Ÿå¿«äº†ï¼›ä¸‰æ˜¯æ•°æ®åº“ç©ºé—´æ”¯æŒå·²ç»å¾ˆæˆç†Ÿäº†ï¼›å››æ˜¯é—¨æ§›é«˜å•Šï¼ˆæŠ¤åŸæ²³ï¼‰

æœ€åï¼Œæˆ‘ä¹Ÿæƒ³å¯¹æˆ‘ç›®å‰çš„çŠ¶æ€åšä¸€æ¬¡æ€»ç»“ã€‚é‚£ä¹ˆï¼ŒGeo Atlasåº”è¯¥å°±æ˜¯æˆ‘æœ€å¥½çš„æ€»ç»“æ–¹å¼ã€‚å› ä¸ºå®ƒæ—¢å¯ä»¥ä¸°å¯Œæˆ‘çš„ç®€å†ğŸ«£ï¼Œåˆå¯ä»¥å¸®åŠ©æˆ‘ç»˜åˆ¶æŠ€èƒ½æ ‘ï¼Œå®Œæˆè¿™ä¸€æ¬¡çš„æ€»ç»“ã€‚

---

ps: å½“ç„¶ï¼Œè¿˜æœ‰å½“ä¸‹ä¿¡åˆ›çš„èƒŒæ™¯åŸå› ã€‚å°±å½“ï¼ŒæŠ›ç –å¼•ç‰äº†ğŸ˜§ï¼Œå“ˆå“ˆå“ˆğŸ˜¬

## çŠ¶æ€

ä¸å®šæœŸæ›´æ–°...

## ç‰¹æ€§

- [x] éµå¾ª [OGC Two Dimensional Tile Matrix Set and Tile Set Metadata Standard 2.0](https://docs.ogc.org/is/17-083r4/17-083r4.html) [å¹¶ä¸å®Œå…¨éµå¾ª]
- [ ] å°è¯•éµå¾ª [NEW OGC API](https://ogcapi.ogc.org/#standards)
- [x] æä¾›çŸ¢é‡åˆ‡ç‰‡èƒ½åŠ›
- [x] æ”¯æŒè‡ªå®šä¹‰æ•°æ®å±æ€§åˆ†çº§è§„åˆ™
- [x] æ”¯æŒGoogleç“¦ç‰‡åæ ‡ç³»(åŸç‚¹åœ¨å·¦ä¸Šè§’, é»˜è®¤å³ä¸ºGoogleç“¦ç‰‡åæ ‡ç³»)
- [x] æ”¯æŒ3857(900913), 4490æŠ•å½±(å³é»˜è®¤æä¾›ç›¸åº”çš„TileMatrixSet)
- [ ] æ”¯æŒè‡ªå®šä¹‰åæ ‡ç³»åŠè‡ªå®šä¹‰åæ ‡è½¬æ¢è¡Œä¸º(æºæ•°æ®åæ ‡ç³»)
- [x] æ”¯æŒè‡ªå®šä¹‰æ•°æ®èŒƒå›´(OGC TileMatrixSet Limitsï¼Œæ‹’ç»èŒƒå›´å¤–è¯·æ±‚)
- [x] æä¾›å…¨å±€ç»Ÿä¸€çš„ï¼Œå¯å¿«é€Ÿé›†æˆçš„ç“¦ç‰‡ç¼“å­˜ç»„ä»¶ï¼Œ 
- [x] æ”¯æŒåŸºäºå†…å­˜å’Œæ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜
- [ ] æ”¯æŒä½¿ç”¨GeoPackageè¿›è¡Œç¼“å­˜
- [x] æ”¯æŒSeed, Reseed, Truncateä¸‰ç§ç“¦ç‰‡ç¼“å­˜å¤„ç†ç­–ç•¥
- [x] æä¾›Namespace, Datastore, FeatureLayerå…ƒæ•°æ®ç®¡ç†æ¨¡å—ï¼Œå¹¶æä¾›ä¸€ä¸ªå¯è§†åŒ–æ“ä½œç•Œé¢(Geo Atlas Dashboard)
- [ ] æä¾›æ …æ ¼æ•°æ®åˆ‡ç‰‡èƒ½åŠ›
- [ ] æä¾›åœ°å½¢æ•°æ®åˆ‡ç‰‡èƒ½åŠ›
- [x] æä¾›æŒ‰éœ€å¿«é€Ÿé›†æˆèƒ½åŠ›(å°†å¸¸ç”¨åŠŸèƒ½å°è£…ä¸ºå„ç§stater)

## æˆªå›¾

![geo-atlas-001](./docs/img/geo-atlas-001.png)
![geo-atlas-002](./docs/img/geo-atlas-002.png)
![geo-atlas-cover-pic](./docs/img/geo-atlas-cover-pic.png)
![geo-atlas-003](./docs/img/geo-atlas-003.png)
![geo-atlas-004](./docs/img/geo-atlas-004.png)
![geo-atlas-005](./docs/img/geo-atlas-005.png)
![geo-atlas-006](./docs/img/geo-atlas-006.png)
![geo-atlas-007](./docs/img/geo-atlas-007.png)

## å¿«é€Ÿå¼€å§‹

ä»¥ä¸‹è¯´æ˜æ—¨åœ¨åŸºäºDockeræŠ€æœ¯å¿«é€Ÿæ­å»ºä¸€ä¸ªçŸ¢é‡åˆ‡ç‰‡æœåŠ¡ç¤ºä¾‹ã€‚

- Geospatial Data Source(With some data)
  ![å¢ƒç•Œä¸æ”¿åŒºæ•°æ®](./docs/img/china_bounds_data_structure.png)
  > ğŸ’¡ <font style="color:red">æä¾›ä¸‹è½½çš„æ˜¯çŸ¢é‡æ•°æ®ï¼Œä¸æ˜¯æœ€ç»ˆåœ°å›¾ï¼Œä¸ç¬¦å·åŒ–åçš„åœ°å›¾å†å¯è§†åŒ–è¡¨è¾¾ä¸Šå­˜åœ¨ä¸€å®šå·®å¼‚ã€‚ç”¨æˆ·åˆ©ç”¨æ­¤æ•°æ®ç¼–åˆ¶åœ°å›¾ï¼Œåº”å½“ä¸¥æ ¼æ‰§è¡Œã€Šåœ°å›¾ç®¡ç†æ¡ä¾‹ã€‹æœ‰å…³è§„å®šï¼›ç¼–åˆ¶çš„åœ°å›¾å¦‚éœ€å‘ç¤¾ä¼šå…¬å¼€çš„ï¼Œè¿˜åº”å½“ä¾æ³•å±¥è¡Œåœ°å›¾å®¡æ ¸ç¨‹åºã€‚</font>

  > ğŸ’¡ <font style="color:orange"> æ•°æ®ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨</font>
- Tiles API Service(Backend)
- Geo Atlas Dashboard(Frontend)

> è¯·ç¡®ä¿ä½ å·²ç»å®‰è£…å¥½äº†Java, Maven, Dockerä»¥åŠDocker Composeã€‚
> æˆ‘æµ‹è¯•ä½¿ç”¨Wsl2(Windows11) + Docker Desktop(4.30.0) + Apache Maven 3.8.7 + Oracle jdk 11.0.20

1. å…‹éš†ä»£ç 
    ```shell
    git clone --recursive https://github.com/geoatlas-cloud/geo-atlas.git
    cd geo-atlas/
    ```
2. é…ç½®ç¯å¢ƒå˜é‡
    ```shell
    cp .env.production.local.template .env.production.local
    ```
   ç„¶åæ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶, å°†å…¶ä¸­çš„é…ç½®é¡¹ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„é…ç½®ï¼Œå¦‚:

   - HOST_IPï¼šå®¿ä¸»æœºIP
   - POSTGRES_PASSWORDï¼šPostgreSQLæ•°æ®åº“åˆå§‹åŒ–å¯†ç 
   - JASYPT_ENCRYPTOR_PASSWORDï¼šç”¨äºåŠ å¯†æ•°æ®åº“è´¦æˆ·ä¿¡æ¯çš„å¯†é’¥
   - CACHE_ENABLEDï¼šæ˜¯å¦å¼€å¯ç¼“å­˜
   - NEXT_PUBLIC_BASE_MAP_TYPEï¼šåœ°å›¾ç±»å‹, osm|tianditu
   - NEXT_PUBLIC_BASE_MAP_TILE_KEYï¼šå½“ä½¿ç”¨å¤©åœ°å›¾æ—¶éœ€è¦å¡«å†™keyï¼Œ4490ç»çº¬åº¦æŠ•å½±é»˜è®¤ä½¿ç”¨å¤©åœ°å›¾ï¼Œå¦‚æœéœ€è¦è¿›è¡Œ4490ç»çº¬åº¦æŠ•å½±é¢„è§ˆè¿˜è¯·å¡«å†™å¤©åœ°å›¾Key
   
3. æ‰§è¡Œæ„å»ºè„šæœ¬, æ‹‰èµ·æœåŠ¡

    ```shell
    chmod +x ./build2run.sh
    ./build2run.sh
    ```
ç­‰å¾…æœåŠ¡å¯åŠ¨å®Œæˆåè®¿é—®: http://localhost:11003, è€ŒåæŒ‰ç…§GeoServerçš„ä½¿ç”¨ä¹ æƒ¯, é€æ­¥åˆ›å»º
- namespace
- datastore
- feature layer
å¯é€šè¿‡é¢„è§ˆçš„æ–¹å¼æ£€æŸ¥ç“¦ç‰‡æœåŠ¡æ˜¯å¦æ­£å¸¸

> é»˜è®¤ç»™å‡ºçš„æ•°æ®ä¸ºæˆ‘å›½çš„å¢ƒç•Œä¸æ”¿åŒºæ•°æ®, æ¥è‡ª[çœå¸‚å¿æ•°æ®CTAmap](https://www.shengshixian.com/), æºè‡ª[1ï¼š100ä¸‡å…¬ä¼—ç‰ˆåŸºç¡€åœ°ç†ä¿¡æ¯æ•°æ®ï¼ˆ2021ï¼‰](https://www.webmap.cn/commres.do?method=result100W)
> å…¶å®æˆ‘ä¹Ÿæ›¾æå–è¿‡å¢ƒç•Œä¸æ”¿åŒºæ•°æ®([å…¨å›½1:100ä¸‡åŸºç¡€åœ°ç†ä¿¡æ¯æ•°æ®-å¢ƒç•Œä¸æ”¿åŒºæå–](https://fuyi-atlas.github.io/posts/program/micro-weather/006/)), ä¸è¿‡ä¸ä¸Šè¿°æ•°æ®ç›¸æ¯”è€Œè¨€æ¯”è¾ƒç²—ç³™, åç”±äºæ—¶é—´å…³ç³»æ²¡æœ‰è¿›è¡Œç»†åŒ–, æ‰€ä»¥æ²¡æœ‰ä½¿ç”¨
> 
> åœ¨æä¾›å¢ƒç•Œä¸æ”¿åŒºæ•°æ®çš„åŒæ—¶, è¿˜æ”¯æŒåˆ‡æ¢ä¸º[OSM China](https://hub.docker.com/repository/docker/threadzhou/ga-geospatial-osm-china/general)çš„æ•°æ®ã€‚ OSM-Chinaæ•°æ®çš„å¤„ç†è¿‡ç¨‹å¤§è‡´ä¸º: å°†æºæ•°æ®é€šè¿‡Osm2pgsqlå…¥åº“, è€Œåä½¿ç”¨pg_dumpåˆ¶ä½œè½¬å‚¨æ–‡ä»¶, å¹¶åŸºäºæ­¤è½¬å‚¨æ–‡ä»¶åˆ¶ä½œPostGISé•œåƒ, åœ¨å®¹å™¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šè‡ªåŠ¨æ¢å¤æ•°æ®ã€‚
> ä½†æ˜¯è½¬å‚¨åçš„æ–‡ä»¶æ¯”è¾ƒå¤§, å¯¼è‡´é•œåƒä¹Ÿæ¯”è¾ƒå¤§, åŒæ—¶æ•°æ®æ¯”è¾ƒå¤šå¯¼è‡´æ¢å¤çš„æ—¶å€™æ¯”è¾ƒæ…¢ã€‚å¦‚æœå°†å…¶ä½œä¸ºç¤ºä¾‹ä¸­çš„æ•°æ®æºçš„è¯, é‚£ä¹ˆä¸‰ä¸ªæœåŠ¡å…¨éƒ¨å¯åŠ¨å®Œæˆè€—æ—¶ä¼°è®¡å¾—æœ‰5åˆ†é’Ÿäº†, æ‰€ä»¥å¹¶æœªå°†å…¶ä½œä¸ºé»˜è®¤å¾—æ•°æ®æºã€‚
> 
> å¦‚æœä½ æƒ³è¦ä½¿ç”¨OSMçš„æ•°æ®æµ‹è¯•, å¯ä»¥å°†å…¶ä½œä¸ºé¢å¤–çš„æ•°æ®æºè¿›è¡Œè¿æ¥, è¿™æ ·å°±ä¸ä¼šå½±å“ç¤ºä¾‹åº”ç”¨çš„åˆæ­¥ä½“éªŒäº†

### æŒ‡å—

ç‚¹å‡»å›¾ç‰‡è·³è½¬Bç«™

[![Geo Atlas Quickstart-å°é¢](./docs/img/geo-atlas-cover-pic.png)](https://www.bilibili.com/video/BV1oAgSenEq5/?vd_source=a3d6ac851199bb1b577a99305af58486)

## æŠ€æœ¯æ¦‚è§ˆ

åŸºäºGeoToolsã€GeoWebCacheè¿›è¡ŒGeo Atlasæ„å»ºï¼ŒåŸºäºSpring Boot Frameworkå¯¹å¤–æä¾›å¿«é€Ÿé›†æˆèƒ½åŠ›ã€‚

- GeoToolsæä¾›çŸ¢é‡æ•°æ®è¯»å–ä»¥åŠåæ ‡è½¬æ¢èƒ½åŠ›
- åœ¨æ­¤å¯¹GeoWebCacheè¿›è¡Œäº†æ‹†åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šåˆ†åˆ«æ˜¯é‡‘å­—å¡”(pyramid, æä¾›ç“¦ç‰‡ç´¢å¼•ä¸ç“¦ç‰‡ç”Ÿæˆèƒ½åŠ›)ä¸ç“¦ç‰‡ç¼“å­˜(tile-cache, æä¾›ç“¦ç‰‡ç¼“å­˜èƒ½åŠ›)

> Mapbox Vector Tile Generator ç”± [java-vector-tile](https://github.com/ElectronicChartCentre/java-vector-tile) æä¾›æ”¯æŒ

### ç³»ç»Ÿæ¶æ„æ¦‚è¿°

ä¸‹å›¾æè¿°äº†ç³»ç»Ÿçš„æ€»ä½“æ¶æ„ã€‚

![ç³»ç»Ÿæ¶æ„å›¾](./docs/img/geo_atlas_architecture_overview_diagram.svg)

> æ­¤å¤„æ›´å¤šçš„è¡¨è¾¾äº†å†…éƒ¨ç»“æ„ä¸å±‚æ¬¡å…³ç³»ï¼Œæ— å…³éƒ¨ç½²

### ç»„ä»¶æ¦‚è¿°

- APP
  - Geo Atlas Dashboard: å¯è§†åŒ–æ“ä½œç•Œé¢
  - Tiles API Application: æä¾›çŸ¢é‡åˆ‡ç‰‡æœåŠ¡çš„åº”ç”¨ç¨‹åº(åŒæ—¶æ”¯æŒDashboard)

- Boot
  - Tiles API Boot Stater: å¯¹Tiles APIçš„å¿«é€Ÿé›†æˆå°è£…, çº¦å®šå¤§äºé…ç½®

- Component
  - Metadata Mgmt: æä¾›Namespace, Datastore, FeatureLayerå…ƒæ•°æ®ç®¡ç†æ¨¡å—
  - Tile Cache: æä¾›ç“¦ç‰‡ç¼“å­˜èƒ½åŠ›, ç›®å‰æ”¯æŒåŸºäºå†…å­˜, æ–‡ä»¶ç³»ç»Ÿä¸¤ç§ç¼“å­˜æ–¹å¼, å¯ä»»æ„ç»„åˆ
  - OGC APIS: æä¾›OGC APIs, ç›®å‰ä»…æ”¯æŒTiles API

- Library
  - Base References: åŸºç¡€ä¾èµ–å£°æ˜
  - Pyramid Model: é‡‘å­—å¡”æ¨¡å‹, ç”¨äºæ„å»ºç“¦ç‰‡é‡‘å­—å¡”ç»“æ„ç´¢å¼•, åŒæ—¶æä¾›åˆ‡ç‰‡ç®¡é“
  - Tile Generator: ç“¦ç‰‡ç”Ÿæˆå™¨, ç›®å‰ä»…æ”¯æŒMapbox Vector Tile Generator

- External Data Sources
  - Config Storage: ç”¨äºå­˜å‚¨Namespace, Datastore, FeatureLayerç­‰å…ƒæ•°æ®
  - Geospatial Data Source: ç”¨äºå­˜å‚¨çŸ¢é‡æ•°æ®, å¦‚PostGISã€SQLServer

## æ„å»º

### Requirements:

- Java >= 1.8 JDK

- Maven >= 3.6.3?

- Docker version >= 19.03.3?

- docker-compose version >= 1.26.2?

æˆ‘ä¸èƒ½å¾ˆå¥½çš„æŠŠæ¡Mavenå’ŒDockerçš„ç‰ˆæœ¬, æˆ‘è‡ªå·±çš„å¼€å‘ç¯å¢ƒå¦‚ä¸‹:

- OS: Windows 11(å·²å¼€å¯WSL 2)
- IDE: IntelliJ IDEA 2023.2.3
- JDK: Amazon Corretto 1.8.0_412 | Oracle jdk1.8.0_241
- Maven: Apache Maven 3.9.2(ä½¿ç”¨IDEA è‡ªå¸¦çš„Maven)
- Docker Desktop: 4.30.0

### Build

1. å…‹éš†ä»£ç 
    ```shell
    git clone https://github.com/geoatlas-cloud/geo-atlas.git
    cd geo-atlas/
    ```
2. è¦æ„å»ºåº”ç”¨ç¨‹åºï¼Œè¯·ä»æ ¹é¡¹ç›®ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤, æˆ–è€…ä½¿ç”¨IDEAçš„Mavenæ’ä»¶

    ```shell
    mvn clean install -DskipTests
    ```

### Running

1. é…ç½®ç¯å¢ƒå˜é‡, é»˜è®¤ä½¿ç”¨devç¯å¢ƒ(å½“ç„¶ï¼Œä½ å¯ä»¥ç›´æ¥ä¿®æ”¹dev.ymlæ–‡ä»¶, è€Œä¸æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶)

   ![å¼€å‘ç¯å¢ƒ ç¯å¢ƒå˜é‡é…ç½®](./docs/img/tiles-api-app-dev-env-config.png)

2. è‡ªè¡Œç”¨IDEAæ‰“å¼€é¡¹ç›®ï¼Œç„¶åè¿è¡ŒApplicationç±»ã€‚

## æ”¯æŒ
- thread.zhou@gmail.com
- thread_zhou@126.com

## å£°æ˜ä¸è‡´è°¢

- Geo Atlasç°ç‰ˆæœ¬å‚ç…§[GeoServer](https://github.com/geoserver/geoserver)åº”ç”¨æ¨¡å¼æ„å»ºï¼Œå¹¶å‚è€ƒäº†[GeoServer](https://github.com/geoserver/geoserver)ä»¥åŠ[GeoServer Cloud](https://github.com/geoserver/geoserver-cloud)çš„å®ç°æ–¹å¼
- Pyramidã€IO(in Library)ã€Tile Cacheæ¨¡å—å‡æ¥è‡ªGeoWebCache, æ˜¯å¯¹å…¶è¿›è¡Œäº†æ‹†è§£å’Œå°‘é‡å˜æ›´
- çŸ¢é‡æ•°æ®çš„è¯»å–ä¸åæ ‡è½¬æ¢ä½¿ç”¨GeoTools
- Mapbox Vector Tile Generatorç”± [java-vector-tile](https://github.com/ElectronicChartCentre/java-vector-tile) æä¾›æ”¯æŒ

## ç‰ˆæƒè®¸å¯
[LGPL-3.0 license](./LICENSE)

ç‰ˆæƒæ‰€æœ‰ (c) 2024-è‡³ä»Šï¼ŒGeo Atlasã€‚
